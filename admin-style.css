/* Use a modern, clean font consistent with the main site for a professional feel. */
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: #111827; /* Deep, cool dark blue */
    background-image: radial-gradient(circle at top left, rgba(59, 130, 246, 0.15), transparent 40%),
                      radial-gradient(circle at bottom right, rgba(236, 72, 153, 0.15), transparent 40%);
    color: #E5E7EB; /* Lighter gray for text */
    min-height: 100vh;
    margin: 0;
    padding: 2rem;
    box-sizing: border-box;
}
.container {
    position: relative;
    background: rgba(31, 41, 55, 0.6); /* Semi-transparent dark gray-blue */
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 2.5rem;
    border-radius: 16px; /* Larger radius for a softer look */
    width: 90%;
    max-width: 900px; /* Slightly wider for more content space */
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    margin: 0 auto;
}
h2 {
    margin-bottom: 2rem;
    text-align: center;
    color: #F9FAFB; /* Pure white for main headers */
    font-weight: 600;
    letter-spacing: 0.5px;
    font-family: 'Inter', sans-serif; /* Unify font */
}
form div { margin-bottom: 1.5rem; }
label { display: block; margin-bottom: 0.5rem; font-weight: 500; color: #D1D5DB; } /* Softer label color */
input, textarea, select {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 8px; /* Consistent radius */
    border: 1px solid #4B5563; /* Gray-blue border */
    background: #374151; /* Darker input background */
    color: #F9FAFB;
    box-sizing: border-box;
    font-size: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
}
input:focus, textarea:focus, select:focus {
    border-color: #3B82F6; /* Vibrant blue accent */
    outline: none;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);
}
textarea { resize: vertical; min-height: 100px; }
button {
    width: 100%;
    padding: 0.85rem 1rem;
    background: #3B82F6; /* Primary action color */
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600; /* Bolder font for buttons */
    transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s;
}
button:hover:not(:disabled) {
    background: #2563EB; /* Darker shade on hover */
    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
    transform: translateY(-2px);
}
button:active:not(:disabled) { transform: translateY(0); box-shadow: none; }
button:disabled {
    background: #4B5563; /* More distinct disabled state */
    color: #9CA3AF;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* --- Header & Logo --- */
#admin-header {
    display: none; /* Hidden by default, shown with .logged-in */
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.logo-container {
    display: flex;
    align-items: center;
    gap: 1rem;
}
.header-logo {
    height: 40px;
}
.logo-container span {
    font-size: 1.25rem;
    font-weight: 600;
    color: #F9FAFB;
}
.login-logo {
    display: block;
    height: 60px;
    margin: 0 auto 1.5rem auto;
}

/* --- View State Management --- */
/* By default, the main panel, logout button, and cancel edit button are hidden. The login form is visible. */
#login-form { display: block; }
#admin-header, #admin-panel-main, #logout-btn, #cancel-edit-btn { display: none; }

/* When the user is logged in, hide the login form and show the main panel and logout button. */
body.logged-in #login-form { display: none; }
body.logged-in #admin-header { display: flex; } /* Use flex for the header */
body.logged-in #admin-panel-main { display: block; }
body.logged-in #logout-btn { display: block; }

/* The 'Users' tab is hidden by default. */
#nav-users-btn { display: none; }

/* It is shown only if the user has admin privileges. */
body.is-admin #nav-users-btn { display: inline-block; }
/* --- End View State Management --- */

/* Pages are hidden by default */
.admin-page { display: none; }
/* The active page is shown */
.admin-page.active { display: block; }

#logout-btn {
    /* No longer needs absolute positioning */
    width: auto;
    padding: 0.6rem 1.2rem;
    background: #4B5563; /* Secondary button color */
    font-weight: 500;
}
#logout-btn:hover { background: #6B7280; transform: none; box-shadow: none; }

/* Styles for Page Navigation */
#admin-nav {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
    background-color: #374151; /* Nav background */
    padding: 0.5rem;
    border-radius: 10px;
}

.nav-btn {
    /* Complete redesign for a "pill" or "tab" look */
    flex-grow: 1;
    width: auto;
    background: none;
    border: none;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    color: #D1D5DB;
    font-weight: 600;
    transition: background-color 0.2s, color 0.2s;
}
.nav-btn:hover:not(.active) {
    background-color: rgba(75, 85, 99, 0.5);
}
.nav-btn.active {
    background-color: #3B82F6;
    color: #FFF;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
}

#item-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
}

.admin-item-card {
    background: #374151; /* Match input background */
    border-radius: 12px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    border: 1px solid #4B5563;
    box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.admin-item-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
    border-color: #3B82F6;
}

.item-card-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
    background-color: #1F2937; /* Darker fallback */
}

.item-card-content {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.item-card-header { margin-bottom: 1rem; }
.item-name { font-weight: 600; font-size: 1.1rem; color: #F9FAFB; display: block; margin-bottom: 0.25rem; }

.item-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.8rem;
    color: #9CA3AF; /* Lighter secondary text */
    margin-top: 0.25rem;
}
.item-publisher { font-weight: 500; }

.item-actions { margin-top: auto; display: flex; gap: 0.75rem; }
.item-actions button {
    width: 100%;
    padding: 0.6rem;
    margin-left: 0;
    background: #4B5563;
    font-weight: 500;
}
.item-actions button:hover { background: #6B7280; box-shadow: none; transform: none; }
.delete-btn { background: #EF4444; color: white; }
.delete-btn:hover { background: #DC2626; }
#cancel-edit-btn {
    background: none;
    border: 1px solid #6B7280;
    color: #E5E7EB;
    margin-top: 10px;
}
#cancel-edit-btn:hover { background: #4B5563; }
/* Add a separator line above the management section for better visual structure. */
#management-container { margin-top: 2rem; border-top: 1px solid #4B5563; padding-top: 2rem; }

.section-divider, .subsection-divider {
    height: 1px;
    background-color: #4B5563;
    border: none;
    margin: 2.5rem 0;
}

/* Class for the submit button when in 'update' mode */
.btn-update { background: #16A34A; /* Green for update */ }
.btn-update:hover { background: #15803D; box-shadow: 0 4px 15px rgba(22, 163, 74, 0.2); }

.error-message { color: #F87171; font-weight: 500; }

/* Styles for Admin Search and Sort Controls */
.admin-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    gap: 1.5rem;
    flex-wrap: wrap;
}

.search-wrapper { flex-grow: 1; min-width: 250px; }
.sort-buttons { display: flex; align-items: center; gap: 0.75rem; flex-shrink: 0; }
.sort-buttons span { color: #D1D5DB; font-size: 0.9rem; font-weight: 500; }

.sort-btn {
    /* Override base button styles for a more compact look */
    width: auto;
    padding: 0.5rem 1rem;
    background: #4B5563;
    font-weight: 500;
}
.sort-btn:hover {
    background: #6B7280;
    /* Reset complex hover effects from base button */
    transform: none;
    box-shadow: none;
}
.sort-btn.active {
    background: #3B82F6;
    color: white;
    font-weight: 600;
}

/* Styles for Toast Notifications */
#toast-container {
    position: fixed;
    top: 20px;
    right: 20px; /* Move to top-right for a more standard feel */
    left: auto;
    transform: none;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.toast {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    border-radius: 8px;
    background: #1F2937; /* Match container bg */
    color: #F9FAFB;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    transform: translateX(calc(100% + 20px));
    opacity: 0;
    transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;
}

.toast.show {
    transform: translateX(0);
    opacity: 1;
}

.toast-success svg { stroke: #34D399; }
.toast-error svg { stroke: #F87171; }

.toast svg { width: 20px; height: 20px; flex-shrink: 0; }

/* Styles for User Management List */
.user-list { margin-top: 1.5rem; display: flex; flex-direction: column; gap: 0.75rem; }

.user-list-item {
    background: #374151;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: background-color 0.2s;
    border: 1px solid transparent;
}

.user-list-item:hover { background-color: #4B5563; border-color: #6B7280; }
.user-info { display: flex; flex-direction: column; gap: 0.25rem; }
.user-username { font-weight: 600; color: #F9FAFB; }
.user-role { font-size: 0.9rem; color: #9CA3AF; text-transform: capitalize; }
.user-created { font-size: 0.8rem; color: #9CA3AF; }
.user-actions button { width: auto; padding: 0.5rem 1rem; background: #EF4444; color: white; }
.user-actions button:hover { background: #DC2626; transform: none; box-shadow: none; }
.user-actions button:disabled { background: #4B5563; color: #9CA3AF; cursor: not-allowed; opacity: 1; }

/* Media Queries for Mobile Responsiveness */
@media (max-width: 850px) {
    .container {
        width: 95%;
        padding: 1.5rem;
    }

    #item-list {
        grid-template-columns: 1fr; /* Single column on smaller screens */
    }
}

@media (max-width: 600px) {
    body { padding: 1rem 0.5rem; }
    .container {
        padding: 1.5rem 1rem;
        border-radius: 0;
        width: 100%;
        border-left: none;
        border-right: none;
    }
    h2 { font-size: 1.5rem; }
    .admin-controls {
        flex-direction: column;
        align-items: stretch;
    }
    #admin-header { flex-direction: column; gap: 1rem; align-items: flex-start; }
    .logo-container span { display: none; } /* Hide "Admin Panel" text on mobile */
    #toast-container { right: 10px; left: 10px; width: auto; }
}